#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
#
Name     : collectd-extensions
Version  : 1.0
Release  : 3
URL      : file:///home/clear/tar/collectd-extensions-1.0.tar.gz
Source0  : file:///home/clear/tar/collectd-extensions-1.0.tar.gz
Source1  : collectd.service
Summary  : collectd-extensions
Group    : Development/Tools
License  : Apache-2.0
Requires: collectd-extensions-services = %{version}-%{release}
Requires: /bin/systemctl
Requires: collectd
Requires: fm-api
Requires: python-httplib2
Requires: python-influxdb
Requires: python-oslo-concurrency
Requires: systemd
Requires: tsconfig
BuildRequires : systemd-dev
Patch1: 0001-add_makefile.patch

%description
No detailed description available

%package services
Summary: services components for the collectd-extensions package.
Group: Systemd services

%description services
services components for the collectd-extensions package.


%prep
%setup -q -n collectd-extensions-1.0
%patch1 -p1

%build
## build_prepend content
%define debug_package %{nil}
%define _sysconfdir /usr/local/etc
%define local_unit_dir %{_sysconfdir}/systemd/system
%define local_plugin_dir %{_sysconfdir}/collectd.d
%define local_python_extensions_dir /opt/collectd/extensions/python
%define local_config_extensions_dir /opt/collectd/extensions/config
## build_prepend end
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C.UTF-8
export SOURCE_DATE_EPOCH=1568184405
export GCC_IGNORE_WERROR=1
export AR=gcc-ar
export RANLIB=gcc-ranlib
export NM=gcc-nm
export CFLAGS="$CFLAGS -O3 -ffat-lto-objects -flto=4 "
export FCFLAGS="$CFLAGS -O3 -ffat-lto-objects -flto=4 "
export FFLAGS="$CFLAGS -O3 -ffat-lto-objects -flto=4 "
export CXXFLAGS="$CXXFLAGS -O3 -ffat-lto-objects -flto=4 "
make  %{?_smp_mflags}


%install
export SOURCE_DATE_EPOCH=1568184405
rm -rf %{buildroot}
install -m 755 -d %{buildroot}%{_sysconfdir}
mkdir -p %{buildroot}/usr/lib/systemd/system
install -m 0644 %{SOURCE1} %{buildroot}/usr/lib/systemd/system/collectd.service
## install_append content
install -m 755 -d %{buildroot}%{_sysconfdir}
install -m 755 -d %{buildroot}%{local_unit_dir}
install -m 755 -d %{buildroot}%{local_plugin_dir}
install -m 755 -d %{buildroot}%{local_config_extensions_dir}
install -m 755 -d %{buildroot}%{local_python_extensions_dir}
pushd src
install -m 644 collectd.service %{buildroot}%{local_unit_dir}
install -m 600 collectd.conf.pmon %{buildroot}%{local_config_extensions_dir}
install -m 700 fm_notifier.py %{buildroot}%{local_python_extensions_dir}
install -m 700 mtce_notifier.py %{buildroot}%{local_python_extensions_dir}
install -m 700 plugin_common.py %{buildroot}%{local_python_extensions_dir}
install -m 700 cpu.py %{buildroot}%{local_python_extensions_dir}
install -m 700 memory.py %{buildroot}%{local_python_extensions_dir}
install -m 700 example.py %{buildroot}%{local_python_extensions_dir}
install -m 700 ntpq.py %{buildroot}%{local_python_extensions_dir}
install -m 700 interface.py %{buildroot}%{local_python_extensions_dir}
install -m 700 remotels.py %{buildroot}%{local_python_extensions_dir}
install -m 700 ptp.py %{buildroot}%{local_python_extensions_dir}
install -m 600 python_plugins.conf %{buildroot}%{local_plugin_dir}
install -m 600 cpu.conf %{buildroot}%{local_plugin_dir}
install -m 600 memory.conf %{buildroot}%{local_plugin_dir}
install -m 600 df.conf %{buildroot}%{local_plugin_dir}
install -m 600 example.conf %{buildroot}%{local_plugin_dir}
install -m 600 ntpq.conf %{buildroot}%{local_plugin_dir}
install -m 600 interface.conf %{buildroot}%{local_plugin_dir}
install -m 600 remotels.conf %{buildroot}%{local_plugin_dir}
install -m 600 ptp.conf %{buildroot}%{local_plugin_dir}
popd
%clean
rm -rf $RPM_BUILD_ROOT
## install_append end

%files
%defattr(-,root,root,-)
/opt/collectd/extensions/config/collectd.conf.pmon
/opt/collectd/extensions/python/cpu.py
/opt/collectd/extensions/python/example.py
/opt/collectd/extensions/python/fm_notifier.py
/opt/collectd/extensions/python/interface.py
/opt/collectd/extensions/python/memory.py
/opt/collectd/extensions/python/mtce_notifier.py
/opt/collectd/extensions/python/ntpq.py
/opt/collectd/extensions/python/plugin_common.py
/opt/collectd/extensions/python/ptp.py
/opt/collectd/extensions/python/remotels.py
/usr/local/etc/collectd.d/cpu.conf
/usr/local/etc/collectd.d/df.conf
/usr/local/etc/collectd.d/example.conf
/usr/local/etc/collectd.d/interface.conf
/usr/local/etc/collectd.d/memory.conf
/usr/local/etc/collectd.d/ntpq.conf
/usr/local/etc/collectd.d/ptp.conf
/usr/local/etc/collectd.d/python_plugins.conf
/usr/local/etc/collectd.d/remotels.conf
/usr/local/etc/systemd/system/collectd.service

%files services
%defattr(-,root,root,-)
/usr/lib/systemd/system/collectd.service
