#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
#
Name     : registry-token-server
Version  : 1.0.0
Release  : 3
URL      : file:///home/clr/stx-tar/registry-token-server-1.0.0.tar.gz
Source0  : file:///home/clr/stx-tar/registry-token-server-1.0.0.tar.gz
Source1  : file:///home/clr/stx-tar/Sirupsen-logrus-55eb11d21d2a31a3cc93838241d04800f52e823d.tar.gz
Source2  : file:///home/clr/stx-tar/docker-distribution-48294d928ced5dd9b378f7fd7c6f5da3ff3f2c89.tar.gz
Source3  : file:///home/clr/stx-tar/docker-libtrust-fa567046d9b14f6aa788882a950d69651d230b21.tar.gz
Source4  : file:///home/clr/stx-tar/gophercloud-gophercloud-aa00757ee3ab58e53520b6cb910ca0543116400a.tar.gz
Source5  : file:///home/clr/stx-tar/gorilla-context-08b5f424b9271eedf6f9f0ce86cb9396ed337a42.tar.gz
Source6  : file:///home/clr/stx-tar/gorilla-mux-456bcfa82d672db7cae587c9b541463f65bc2718.tar.gz
Source7  : file:///home/clr/stx-tar/token-server.tar.gz
Summary  : No detailed summary available
Group    : Development/Tools
License  : Apache-2.0
Requires: registry-token-server-bin = %{version}-%{release}
Requires: registry-token-server-services = %{version}-%{release}
BuildRequires : buildreq-golang
BuildRequires : go >= 1.6
BuildRequires : systemd

%description
No detailed description available

%package bin
Summary: bin components for the registry-token-server package.
Group: Binaries
Requires: registry-token-server-services = %{version}-%{release}

%description bin
bin components for the registry-token-server package.


%package services
Summary: services components for the registry-token-server package.
Group: Systemd services

%description services
services components for the registry-token-server package.


%prep
%setup -q -n registry-token-server-1.0.0
cd ..
%setup -q -T -D -n registry-token-server-1.0.0 -b 2
cd ..
%setup -q -T -D -n registry-token-server-1.0.0 -b 3
cd ..
%setup -q -T -D -n registry-token-server-1.0.0 -b 4
cd ..
%setup -q -T -D -n registry-token-server-1.0.0 -b 5
cd ..
%setup -q -T -D -n registry-token-server-1.0.0 -b 6
cd ..
%setup -q -T -D -n registry-token-server-1.0.0 -b 1
cd ..
%setup -q -T -D -n registry-token-server-1.0.0 -b 7

%build
## build_prepend content
tar -zxvf %{SOURCE1}
tar -zxvf %{SOURCE2}
tar -zxvf %{SOURCE3}
tar -zxvf %{SOURCE4}
tar -zxvf %{SOURCE5}
tar -zxvf %{SOURCE6}
mkdir -p _build/src/github.com/gorilla/ && mv gorilla-mux _build/src/github.com/gorilla/mux
mkdir -p _build/src/github.com/docker/ && mv docker-distribution _build/src/github.com/docker/distribution
mkdir -p _build/src/github.com/docker/ && mv docker-libtrust _build/src/github.com/docker/libtrust
mkdir -p _build/src/github.com/docker/distribution/ && mv gorilla-context _build/src/github.com/docker/distribution/context
mkdir -p _build/src/github.com/Sirupsen/ && mv Sirupsen-logrus _build/src/github.com/Sirupsen/logrus
mkdir -p _build/src/github.com/gophercloud && mv gophercloud-gophercloud _build/src/github.com/gophercloud/gophercloud
mkdir -p ./_build/src/
ln -s $(pwd) ./_build/src/registry-token-server
export GOPATH=$(pwd)/_build
cd ./_build
## build_prepend end
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C.UTF-8
export GOPATH="$PWD"
go build -o bin/registry-token-server registry-token-server

%install
rm -rf %{buildroot}
## install_prepend content
%define _sysconfdir	/usr/local/etc
%define _unitdir /usr/lib/systemd/system/
## install_prepend end

## install_append content
install -d -p %{buildroot}%{_bindir}
cd _build/
install -p -m 0755 bin/registry-token-server %{buildroot}%{_bindir}
cd ../
install -d %{buildroot}%{_unitdir}
tar -zxvf %{SOURCE7}
install -p -m 644 registry-token-server.service %{buildroot}%{_unitdir}
install -d -p %{buildroot}%{_sysconfdir}/ssl/private
install -d -p %{buildroot}%{_sysconfdir}/%{name}/registry
install -p -m 644 token_server.conf %{buildroot}%{_sysconfdir}/%{name}/registry
%{!?_licensedir:%global license %doc}
## install_append end

%files
%defattr(-,root,root,-)
/usr/local/etc/registry-token-server/registry/token_server.conf

%files bin
%defattr(-,root,root,-)
/usr/bin/registry-token-server

%files services
%defattr(-,root,root,-)
/usr/lib/systemd/system/registry-token-server.service
